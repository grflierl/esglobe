angular.module('app-esrl.defaults', []).factory('defaults', function() {
    var service = {};
    service.getEsrlDefaults = function (input) {
        switch(input) {
            case "pottmp":
                return {
                    contour: 5,
                    min: 260,
                    max: 450
                };
                break;
            case "air":
                return {
                    contour: 5,
                    min: -100,
                    max: 200
                };
                break;
            case "shum":
                return {
                    contour: 1,
                    min: 0,
                    max: 50
                };
                break;
            case "rhum":
                return {
                    contour: 8,
                    min: 0,
                    max: 100
                };
                break;
            case "wspd":
                return {
                    contour: 3,
                    min: 0,
                    max: 50
                };
                break;
            case "hgt":
                return {
                    contour: 1000,
                    min: 0,
                    max: 16000
                };
                break;
            case "uwnd":
                return {
                    contour: 3,
                    min: -9,
                    max: 65
                };
                break;
            case "vwnd":
                return {
                    contour: 0.5,
                    min: -4,
                    max: 4
                };
                break;
            case "omega":
                return {
                    contour: 0.01,
                    min: -0.03,
                    max: 0.04
                };
                break;
            default:
                return {
                    contour: 1,
                    min: 0,
                    max: 100
                };
        }
    };

    service.getEsrlDefaultsByLevel = function (field, level) {
        const baseline = service.getEsrlDefaults(field);

        const defaults = {};
        defaults['pottmp'] = {};
        defaults['hgt'] = {};
        defaults['uwnd'] = {};
        defaults['vwnd'] = {};
        defaults['omega'] = {};

        defaults['pottmp'] = [[1000, 227.242325, 314.761841],
                        [925, 229.544540, 317.962494],
                        [850, 231.738312, 319.533081],
                        [700, 235.218994, 323.376892],
                        [600, 249.301849, 328.343536],
                        [500, 275.625092, 333.808075],
                        [400, 283.807678, 340.745728],
                        [300, 292.779877, 351.230042],
                        [250, 299.893494, 355.829742],
                        [200, 312.289032, 364.850494],
                        [150, 333.296478, 398.081696],
                        [100, 365.942810, 448.612244],
                        [70, 397.542847, 501.235657],
                        [50, 434.038391, 557.786011],
                        [30, 499.778870, 656.342773],
                        [20, 567.767151, 748.753174],
                        [10, 715.033813, 946.090881]];

        defaults['hgt'] = [[1000, -198.802155, 421.148926],
                        [925, 387.289246, 944.685547],
                        [850, 1024.504272, 1616.114014],
                        [700, 2437.993408, 3232.400635],
                        [600, 3529.368408, 4502.147949],
                        [500, 4784.470215, 5942.663574],
                        [400, 6264.343750, 7634.529297],
                        [300, 8079.073730, 9767.481445],
                        [250, 9185.296875, 11060.822266],
                        [200, 10499.635742, 12578.488281],
                        [150, 12152.807617, 14434.563477],
                        [100, 14435.243164, 16869.015625],
                        [70, 16401.882812, 18959.152344],
                        [50, 18228.160156, 21115.966797],
                        [30, 20995.660156, 24577.435547],
                        [20, 23208.531250, 27355.121094],
                        [10, 27096.863281, 32228.029297]];

        defaults['omega'] = [[1000, -0.310069, 0.642231],
                        [925, -0.310069, 0.596498],
                        [850, -0.293369, 0.482398],
                        [700, -0.261302, 0.301531],
                        [600, -0.128802, 0.157865],
                        [500, -0.111035, 0.127631],
                        [400, -0.134702, 0.114965],
                        [300, -0.151169, 0.099398],
                        [250, -0.145135, 0.081931],
                        [200, -0.113102, 0.058465],
                        [150, -0.060635, 0.040331],
                        [100, -0.026602, 0.020198]];

        defaults['uwnd'] = [[1000, -11.793668, 12.573666],
                        [925, -14.364333, 18.849333],
                        [850, -12.827665, 19.680998],
                        [700, -15.660668, 21.232998],
                        [600, -14.589666, 28.558331],
                        [500, -10.993002, 37.965332],
                        [400, -10.718667, 50.204330],
                        [300, -14.057336, 66.569992],
                        [250, -19.055670, 74.379318],
                        [200, -25.120668, 76.888672],
                        [150, -33.669003, 69.188652],
                        [100, -35.822666, 49.061996],
                        [70, -26.302666, 55.558998],
                        [50, -21.842337, 62.240665],
                        [30, -23.713999, 73.513672],
                        [20, -27.705000, 80.522331],
                        [10, -37.339001, 91.111664]];

        defaults['vwnd'] = [[1000, -9.782001, 14.086331],
                        [925, -9.616334, 15.907999],
                        [850, -9.423002, 13.832999],
                        [700, -9.880336, 13.229331],
                        [600, -8.585668, 9.470333],
                        [500, -10.597333, 10.015331],
                        [400, -12.885333, 11.615997],
                        [300, -14.880004, 13.564665],
                        [250, -14.937334, 13.536331],
                        [200, -14.045336, 13.167996],
                        [150, -13.786666, 12.835333],
                        [100, -15.111668, 13.560665],
                        [70, -17.317667, 16.889997],
                        [50, -20.141003, 19.915001],
                        [30, -24.889668, 25.628330],
                        [20, -28.613997, 28.258665],
                        [10, -34.422001, 33.538334]];

        var output;
        const match = _.find(defaults[field], function (row) {
            return row[0] === parseInt(level);
        });

        if (match) {
            output = {
                min: match[1],
                max: match[2],
                contour: Math.round(((match[2] - match[1]) / 20) * 100) / 100
            }
        }

        if (!output) {
            return baseline;
        } else {
            return output;
        }
    };

    return service;
});